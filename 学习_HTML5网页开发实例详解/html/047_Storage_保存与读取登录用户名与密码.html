<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<script src="../js/jquery-1.8.3.js"></script>
	<style>
		*:focus {
			outline: none;
		}
		ul, li {
			list-style: none
		}
		body {
			text-align: center;
		}
		form {
			height: 170px;
			width: 340px;
			margin: 0 auto;
			padding: 30px;
			top: 50%;
			left: 50%;
			z-index: 0;
			background-color: #eee;
			/* gradient带webkit前缀被 Safari 4+, Chrome 支持 */
			background-image: -webkit-gradient(linear, left top, left bottom, from(#fff), to(#eee));
			/* linear-gradient带webkit前缀被 Chrome 10+, Safari 5.1+, iOS 5+ 支持 */
			background-image: -webkit-linear-gradient(top, #fff, #eee);
			/* linear-gradient带moz前缀被 Firefox 3.6-15 支持 */
			background-image: -moz-linear-gradient(top, #fff, #eee);
			/* linear-gradient带ms前缀被 IE9+ 支持 */
			background-image: -ms-linear-gradient(top, #fff, #eee);
			/* linear-gradient带o前缀被 Opera 10.5-12.00 支持 */
			background-image: -o-linear-gradient(top, #fff, #eee);
			/* 标准格式linear-gradient被 Opera 10.5, IE9+, Safari 5, Chrome, Firefox 4+, iOS 4, Android 2.1+ 支持 */
			background-image: linear-gradient(top, #fff, #eee);
			/* border-radius带moz前缀被 Firefox 3.5+ 支持 */
			-moz-border-radius: 3px;
			/* border-radius带webkit前缀被 Safari 3-4, iOS 1-3.2, Android ≤1.6 支持*/
			-webkit-border-radius: 3px;
			/* 标准格式border-radius被 Opera 10.5, IE9+, Safari 5, Chrome, Firefox 4+, iOS 4, Android 2.1+ 支持 */
			border-radius: 3px;
			/* box-shadow带webkit前缀被 Safari 3-4, iOS 4.0.2 - 4.2, Android 2.3+ 支持 */
			-webkit-box-shadow: 0 0 2px rgba(0, 0, 0, 0.2), 0 1px 1px rgba(0, 0, 0, .2), 0 3px 0 #fff, 0 4px 0 rgba(0, 0, 0, .2);
			/* box-shadow带moz前缀被 Firefox 4+ 支持 */
			-moz-box-shadow: 0 0 2px rgba(0, 0, 0, 0.2), 0 1px 1px rgba(0, 0, 0, .2), 0 3px 0 #fff, 0 4px 0 rgba(0, 0, 0, .2);
			/* 标准格式box-shadow被 Opera 10.5, IE9+, Firefox 4+, Chrome 6+, iOS 5 支持*/
			box-shadow: 0 0 2px rgba(0, 0, 0, 0.2), 0 1px 1px rgba(0, 0, 0, .2), 0 3px 0 #fff, 0 4px 0 rgba(0, 0, 0, .2);
		}
		input {
			float: left;
			padding: 15px 15px 15px 45px;
			margin: 0 0 10px 0;
			width: 280px;
			border: 1px solid #CCC;
			background: #F1F1F1;
			font-size: 14px;
			-webkit-border-radius: 5px;
			-moz-border-radius: 5px;
			border-radius: 5px;
			-moz-border-radius: 5px;
			/* Firefox 3.5+ */
			-webkit-border-radius: 5px;
			/* Safari 3-4, iOS 1-3.2, Android ≤1.6 */
			border-radius: 5px;
			/* Opera 10.5, IE9+, Safari 5, Chrome, Firefox 4+, iOS 4, Android 2.1+ */
			-moz-box-shadow: 0 1px 1px #ccc inset, 0 1px 0 #fff;
			/* inset表示盒内阴影；Firefox 4+ */
			-webkit-box-shadow: 0 1px 1px #CCC inset, 0 1px 0 white;
			/* Safari 3-4, iOS 4.0.2 - 4.2, Android 2.3+ */
			box-shadow: 0 1px 1px #CCC inset, 0 1px 0 white;
			/* Opera 10.5, IE9+, Firefox 4+, Chrome 6+, iOS 5 */
			/* ease(逐渐慢下来);linear(匀速);ease-in(由慢到快);ease-out(由快到慢);ease-in-out(先慢到快再到慢) */
			-webkit-transition: all 0.5s ease-in-out;
			/* Safari 3.2+, Chrome */
			-moz-transition: all 0.5s ease-in-out;
			/* Firefox 4-15 */
			-o-transition: all 0.5s ease-in-out;
			/* Opera 10.5–12.00 */
			transition: all 0.5s ease-in-out;
			/* Firefox 16+, Opera 12.50+ */
		}
		input:focus {
			background-color: #fff;
			border-color: #e8c291;
			outline: none;
			-moz-box-shadow: 0 0 0 1px #e8c291 inset;
			-webkit-box-shadow: 0 0 0 1px #e8c291 inset;
			box-shadow: 0 0 0 1px #e8c291 inset;
		}
		input:hover {
			border-color: inherit !important;
			background-color: #EfEfEf;
			-webkit-border-radius: 5px 0 0 5px;
			-moz-border-radius: 5px 0 0 5px;
			border-radius: 5px 0 0 5px;
		}
		input:not(:focus) {
			opacity: 0.6;
		}
		input:valid {
			opacity: 0.8;
		}
		input:focus:invalid {
			border: 1px solid red;
			background-color: #FFEFF0;
		}
		section {
			width: 400px;
			margin: 0 auto;
		}
		 ::-webkit-scrollbar-track-piece {
			background-color: rgba(0, 0, 0, 0);
			-webkit-border-radius: 0
		}
		 ::-webkit-scrollbar {
			width: 8px;
			height: 8px
		}
		 ::-webkit-scrollbar-thumb {
			height: 50px;
			background-color: rgba(0, 0, 0, 0.4);
			-webkit-border-radius: 4px
		}
		 ::-webkit-scrollbar-thumb:hover {
			height: 50px;
			background-color: rgba(0, 0, 0, 0.5);
			-webkit-border-radius: 4px
		}
		.clearfix {
			clear: both;
		}
		#submit:hover, #submit:focus {
			background-color: #FDDB6F;
			/* 可以参考form样式中的gradient注释 */
			background-image: -webkit-gradient(linear, left top, left bottom, from(#FFB94B), to(#FDDB6F));
			background-image: -webkit-linear-gradient(top, #FFB94B, #FDDB6F);
			background-image: -moz-linear-gradient(top, #FFB94B, #FDDB6F);
			background-image: -ms-linear-gradient(top, #FFB94B, #FDDB6F);
			background-image: -o-linear-gradient(top, #FFB94B, #FDDB6F);
			background-image: linear-gradient(top, #FFB94B, #FDDB6F);
		}
		#submit {
			background-color: #FFB94B;
			border-width: 1px;
			border-style: solid;
			border-color: #D69E31 #E3A037 #D5982D #E3A037;
			float: left;
			height: 35px;
			padding: 0;
			width: 120px;
			cursor: pointer;
			font: bold 15px Arial, Helvetica;
			color: #8F5A0A;
			margin: 20px 0 0 0;
			/* 可以参考form样式中的gradient注释 */
			background-image: -webkit-gradient(linear, left top, left bottom, from(#FDDB6F), to(#FFB94B));
			background-image: -webkit-linear-gradient(top, #FDDB6F, #FFB94B);
			background-image: -moz-linear-gradient(top, #FDDB6F, #FFB94B);
			background-image: -ms-linear-gradient(top, #FDDB6F, #FFB94B);
			background-image: -o-linear-gradient(top, #FDDB6F, #FFB94B);
			background-image: linear-gradient(top, #FDDB6F, #FFB94B);
			/* 可以参考form样式中的border-radius注释 */
			-moz-border-radius: 3px;
			-webkit-border-radius: 3px;
			border-radius: 3px;
			/* 给文字加上阴影，早在CSS 2中已经出现 */
			text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
			/* 可以参考form样式中的box-shadow注释 */
			-moz-box-shadow: 0 0 1px rgba(0, 0, 0, 0.3), 0 1px 0 rgba(255, 255, 255, 0.3) inset;
			-webkit-box-shadow: 0 0 1px rgba(0, 0, 0, 0.3), 0 1px 0 rgba(255, 255, 255, 0.3) inset;
			box-shadow: 0 0 1px rgba(0, 0, 0, 0.3), 0 1px 0 rgba(255, 255, 255, 0.3) inset;
		}
		.item-name {
			background: url(../images/user.png) 10px 11px no-repeat;
		}
		.item-email {
			background: url(../images/email.png) 10px 11px no-repeat;
		}
		.item-password {
			background: url(../images/keys.png) 10px 11px no-repeat;
		}
		.first {
			position: relative;
		}
		ul {
			position: absolute;
			border: 1px solid rgba(0, 0, 0, .2);
			box-shadow: 0 0 5px #ddd inset;
			width: 340px;
			height: 85px;
			top: 32px;
			background-color: White;
			z-index: 2;
			zoom: 1;
			padding: 0;
			border-radius: 2px;
			overflow-y: scroll;
			overflow-x: hidden;
			display: none;
		}
		li {
			text-align: left;
			padding: 5px;
			border-radius: 2px;
		}
		li:hover {
			background-color: rgba(0, 0, 0, .2);
		}
	</style>
	<title>保存与读取登录用户名与密码</title>
</head>
<body>
	<header>
		<h2>保存与读取登录用户名与密码</h2>
	</header>
	<section>
		<form action="" method="post">
			<div class="clearfix first">
				<!-- 去除输入框默认下拉提示 -->
				<input type="text" tabindex="1" id="name" class="item-name" placeholder="昵称" autocomplete="off" required/>
				<ul class="suggest"></ul>
				<!-- 下拉提示区域 -->
			</div>
			<div class="clearfix">
				<!-- 去除输入框默认下拉提示 -->
				<input type="password" tabindex="2" id="password" class="item-password" placeholder="密码" autocomplete="off" required/> </div>
			<div class="clearfix">
				<input type="submit" tabindex="3" id="submit" value="登     录" /> </div>
		</form>
	</section>
</body>
<script>
	var el_name = $('#name'), // 昵称输入框
		el_password = $('#password'), // 密码输入框
		el_submit = $('#submit'), // 登陆按钮 
		el_suggest = $('ul.suggest'), // 下拉提示容器
		el_form = $('form'), // 表单
		storage_key = 'html5_local'; // 缓存key
	el_suggest.on('click',function (e) {
		var target = $(e.target);
			el_name.val(target.text());// 写入昵称
			el_password.val(target.attr('data-pass'));// 写入密码
	});
	el_form.on('submit',function () {// 截取表单提交保存账号密
		var data = localStorage.getItem(storage_key);//获取key缓存内容
			data = data ? JSON.parse(data) : {};
			data[el_name.val().trim()] = el_password.val().trim();//缓存账号和密码
			localStorage.setItem(storage_key,JSON.stringify(data));//设置缓存
	});
	var storage_data = localStorage.getItem(storage_data),//读取缓存
		html_arr = [];//html字符数组
	if (storage_data) {
		storage_data = JSON.parse(storage_data);//解析为对象
		for (var key in storage_data) {// 循环缓存对象
			html_arr.push('<li data-pass="' + storage_data[key] + '">' + key + '</li>');
		};
		el_suggest.html(html_arr.join(''));//设置下来框结构
		el_name.on({
			'mousedown' : function () {
				el_suggest.fadeIn();//鼠标点击展开下拉框
			},
			'blur' : function () {
				el_suggest.fadeOut();//失去焦点隐藏下拉框
			}
		})
	}
</script>
</html>